<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Center</title>
  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
  <div id="app">
    <header>
      <h1>Task Center</h1>
      <p>Your balance: <span id="balance">0</span> ♻️</p>
    </header>

    <nav>
      <button id="tasks-btn">Tasks</button>
      <button id="freins-btn" disabled>Freins</button>
      <button id="swap-btn" disabled>Swap</button>
    </nav>

    <section id="tasks-section">
      <h2>Tasks</h2>
      <div id="categories">
        <button class="category-btn" onclick="loadTasks('tg_bot')">Join TG Bots</button>
        <button class="category-btn" onclick="loadTasks('tg_channels')">Join TG Channels</button>
        <button class="category-btn" onclick="loadTasks('watch_ads')">Watch Ads</button>
      </div>
    </section>
  </div>

  <!-- Scripts -->
  <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
  <script>
    // Initialiser Adsgram
    const AdController = window.Adsgram.init({ blockId: "int-7034" });

    // Simuler le solde de l'utilisateur
    let userBalance = 0;

    // Mettre à jour le solde affiché
    function updateBalance(amount) {
      userBalance += amount;
      document.getElementById("balance").innerText = userBalance;
    }

    // Charger les tâches selon la catégorie
    function loadTasks(category) {
      const taskSection = document.getElementById("tasks-section");
      let tasksHtml = `<h2>${category === "tg_bot" ? "Join TG Bots" : category === "tg_channels" ? "Join TG Channels" : "Watch Ads"}</h2>`;

      if (category === "tg_bot" || category === "tg_channels") {
        // Exemple de tâche TG
        tasksHtml += `
          <div class="task">
            <p>Name: Sample Bot</p>
            <p>Description: Join and claim 500 ♻️</p>
            <button class="join-btn" onclick="joinTask(this)">Join</button>
          </div>`;
      } else if (category === "watch_ads") {
        tasksHtml += `
          <div class="task">
            <p>Watch Ads and earn 50 ♻️</p>
            <button class="watch-ads-btn" onclick="watchAd()">Watch</button>
          </div>`;
      }

      taskSection.innerHTML = tasksHtml;
    }

    // Gérer les tâches de type "Join"
    function joinTask(button) {
      button.disabled = true;
      button.innerText = "Claim";
      setTimeout(() => {
        button.innerText = "Claim 500 ♻️";
        button.onclick = () => {
          updateBalance(500);
          button.disabled = true;
        };
      }, 10000);
    }

    // Gérer les publicités
    function watchAd() {
      AdController.showAd()
        .then(() => {
          updateBalance(50);
          alert("Ad watched! You've earned 50 ♻️");
        })
        .catch((err) => {
          console.error("Error watching ad:", err);
        });
    }
  </script>
</body>
</html>
